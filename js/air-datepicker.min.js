!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.AirDatepicker=t():e.AirDatepicker=t()}(this,function(){"use strict";var i={d:function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},e={},p=(i.d(e,{default:function(){return E}}),{days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"}),s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:p.days,minView:p.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function a(e,t){let s=1<arguments.length&&void 0!==t?t:document;return"string"==typeof e?s.querySelector(e):e}function o(e){let{tagName:t="div",className:s="",innerHtml:i="",id:a="",attrs:n={}}=0<arguments.length&&void 0!==e?e:{},r=document.createElement(t);return s&&r.classList.add(...s.split(" ")),a&&(r.id=a),i&&(r.innerHTML=i),n&&h(r,n),r}function h(e,t){for(var[s,i]of Object.entries(t))void 0!==i&&e.setAttribute(s,i);return e}function g(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()}function D(e){var t=e.getHours(),s=t%12==0?12:t%12;return{year:e.getFullYear(),month:e.getMonth(),fullMonth:e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,date:e.getDate(),fullDate:e.getDate()<10?"0"+e.getDate():e.getDate(),day:e.getDay(),hours:t,fullHours:c(t),hours12:s,fullHours12:c(s),minutes:e.getMinutes(),fullMinutes:e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()}}function c(e){return e<10?"0"+e:e}function u(e){e=10*Math.floor(e.getFullYear()/10);return[e,9+e]}function m(){let s=[];for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(e=>{if("object"==typeof e)for(var t in e)e[t]&&s.push(t);else e&&s.push(e)}),s.join(" ")}function y(e,t,s){s=2<arguments.length&&void 0!==s?s:p.days;return!(!e||!t)&&(e=D(e),t=D(t),{[p.days]:e.date===t.date&&e.month===t.month&&e.year===t.year,[p.months]:e.month===t.month&&e.year===t.year,[p.years]:e.year===t.year}[s])}function f(e,t,s){e=l(e,!1).getTime(),t=l(t,!1).getTime();return s?t<=e:t<e}function w(e,t){return!f(e,t,!0)}function l(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],e=new Date(e.getTime());return"boolean"!=typeof t||t||e.setHours(0,0,0,0),e}function n(e,t,s){e.length?e.forEach(e=>{e.addEventListener(t,s)}):e.addEventListener(t,s)}function r(e,t){return!(!e||e===document||e instanceof DocumentFragment)&&(e.matches(t)?e:r(e.parentNode,t))}function d(e,t,s){return s<e?s:e<t?t:e}function b(r){for(var e=arguments.length,t=new Array(1<e?e-1:0),s=1;s<e;s++)t[s-1]=arguments[s];return t.filter(e=>e).forEach(e=>{for(var[t,s]of Object.entries(e)){var i,a,n;void 0!==s&&"[object Object]"===s.toString()?(i=void 0!==r[t]?r[t].toString():void 0,a=s.toString(),n=Array.isArray(s)?[]:{},r[t]=!r[t]||i!==a?n:r[t],b(r[t],s)):r[t]=s}}),r}function k(e){let t=e;return e instanceof Date||(t=new Date(e)),isNaN(t.getTime())&&(console.log('Unable to convert value "'.concat(e,'" to Date object')),t=!1),t}function v(e){var t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+e+")($|<|"+t+")","g")}function C(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}class A{constructor(){var{type:e,date:t,dp:s,opts:i,body:a}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};C(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),C(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),C(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),C(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),C(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),C(this,"onChangeFocusDate",e=>{e?((e=y(e,this.date,this.type))?this.focus():!e&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()):this.focused&&this.removeFocus()}),C(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),(this.$cell.adpCell=this).$cell)),this.type=e,this.singleType=this.type.slice(0,-1),this.date=t,this.dp=s,this.opts=i,this.body=a,this.customData=!1,this.init()}init(){let{range:e,onRenderCell:t}=this.opts;t&&(this.customData=t({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),e&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(p.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(p.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(p.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(p.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var{year:e,month:t,date:s}=D(this.date),i=(null==(i=this.customData)?void 0:i.attrs)||{};this.$cell=o({className:this._getClassName(),attrs:{"data-year":e,"data-month":t,"data-date":s,...i}})}_getClassName(){var e;let t=new Date,{selectOtherMonths:s,selectOtherYears:i}=this.opts,{minDate:a,maxDate:n}=this.dp,r=D(this.date)["day"],h=this._isOutOfMinMaxRange(),o=null==(e=this.customData)?void 0:e.disabled,l=m("air-datepicker-cell","-".concat(this.singleType,"-"),{"-current-":y(t,this.date,this.type),"-min-date-":a&&y(a,this.date,this.type),"-max-date-":n&&y(n,this.date,this.type)}),d="";switch(this.type){case p.days:d=m({"-weekend-":this.dp.isWeekend(r),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!s||h||o});break;case p.months:d=m({"-disabled-":h||o});break;case p.years:d=m({"-other-decade-":this.isOtherDecade,"-disabled-":h||this.isOtherDecade&&!i||o})}return m(l,d,null==(e=this.customData)?void 0:e.classes)}_getHtml(){var e,{year:t,month:s,date:i}=D(this.date),{showOtherMonths:a,showOtherYears:n}=this.opts;if(null!=(e=this.customData)&&e.html)return this.customData.html;switch(this.type){case p.days:return!a&&this.isOtherMonth?"":i;case p.months:return this.dp.locale[this.opts.monthsField][s];case p.years:return!n&&this.isOtherDecade?"":t}}_isOutOfMinMaxRange(){let{minDate:e,maxDate:t}=this.dp,{type:s,date:i}=this,{month:a,year:n,date:r}=D(i),h=s===p.days,o=s===p.years,l=!!e&&new Date(n,o?e.getMonth():a,h?r:e.getDate()),d=!!t&&new Date(n,o?t.getMonth():a,h?r:t.getDate());return e&&t?w(l,e)||f(d,t):e?w(l,e):t?f(d,t):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:e,rangeDateTo:t}=this.dp,s=m({"-in-range-":e&&t&&(a=t,f(i=this.date,e)&&w(i,a)),"-range-from-":e&&y(this.date,e,this.type),"-range-to-":t&&y(this.date,t,this.type)});var i,a;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),s&&this.$cell.classList.add(...s.split(" "))}_handleSelectedStatus(){var e=this.dp._checkIfDateIsSelected(this.date,this.type);e?this.select():!e&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){y(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function _(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}let N={[p.days]:'<div class="air-datepicker-body--day-names"></div>'+'<div class="air-datepicker-body--cells -'.concat(p.days,'-"></div>'),[p.months]:'<div class="air-datepicker-body--cells -'.concat(p.months,'-"></div>'),[p.years]:'<div class="air-datepicker-body--cells -'.concat(p.years,'-"></div>')};const M=".air-datepicker-cell";class ${constructor(e){var{dp:e,type:t,opts:s}=e;_(this,"handleClick",e=>{var t,e=e.target.closest(M).adpCell;e.isDisabled||(this.dp.isMinViewReached?(t=this.dp._checkIfDateIsSelected(e.date,e.type))?this.dp._handleAlreadySelectedDates(t,e.date):this.dp.selectDate(e.date):this.dp.down())}),_(this,"handleDayNameClick",e=>{e=e.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(e),datepicker:this.dp})}),_(this,"onChangeCurrentView",e=>{e!==this.type?this.hide():(this.show(),this.render())}),_(this,"onMouseOverCell",e=>{e=r(e.target,M);this.dp.setFocusDate(!!e&&e.adpCell.date)}),_(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),_(this,"onClickBody",e=>{let t=this.opts["onClickDayName"],s=e.target;s.closest(M)&&this.handleClick(e),t&&s.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(e)}),_(this,"onMouseDown",e=>{this.pressed=!0;e=r(e.target,M),e=e&&e.adpCell;y(e.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),y(e.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),_(this,"onMouseMove",t=>{if(this.pressed&&this.dp.isMinViewReached){t.preventDefault();var t=r(t.target,M),t=t&&t.adpCell,{selectedDates:s,rangeDateTo:i,rangeDateFrom:a}=this.dp;if(t&&!t.isDisabled){let e=t["date"];2===s.length&&(this.rangeFromFocused&&!f(e,i)&&({hours:t,minutes:s}=D(a),e.setHours(t),e.setMinutes(s),this.dp.rangeDateFrom=e,this.dp.replaceDate(a,e)),this.rangeToFocused&&!w(e,a)&&({hours:t,minutes:s}=D(i),e.setHours(t),e.setMinutes(s),this.dp.rangeDateTo=e,this.dp.replaceDate(i,e)))}}}),_(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),_(this,"onChangeViewDate",(e,t)=>{if(this.isVisible){var s=u(e),i=u(t);switch(this.dp.currentView){case p.days:if(y(e,t,p.months))return;break;case p.months:if(y(e,t,p.years))return;break;case p.years:if(s[0]===i[0]&&s[1]===i[1])return}this.render()}}),_(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(e=>{this.$cells.appendChild(e.render())})}),this.dp=e,this.type=t,this.opts=s,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===p.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){var{range:e,dynamicRange:t}=this.opts;n(this.$el,"mouseover",this.onMouseOverCell),n(this.$el,"mouseout",this.onMouseOutCell),n(this.$el,"click",this.onClickBody),e&&t&&(n(this.$el,"mousedown",this.onMouseDown),n(this.$el,"mousemove",this.onMouseMove),n(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(p.eventChangeViewDate,this.onChangeViewDate),this.dp.on(p.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=o({className:"air-datepicker-body -".concat(this.type,"-"),innerHtml:N[this.type]}),this.$names=a(".air-datepicker-body--day-names",this.$el),this.$cells=a(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,t="",s=this.dp.isWeekend,i=this.opts["onClickDayName"],a=e,n=0;for(;n<7;){var r=a%7,h=m("air-datepicker-body--day-name",{[p.cssClassWeekend]:s(r),"-clickable-":!!i}),o=this.dp.locale.daysMin[r];t+='<div class="'.concat(h,"\" data-day-index='").concat(r,"'>").concat(o,"</div>"),n++,a++}return t}_getDaysCells(){let{viewDate:e,locale:{firstDay:t}}=this.dp,s=g(e),{year:i,month:a}=D(e),n=new Date(i,a,1),r=new Date(i,a,s),h=n.getDay()-t,o=6-r.getDay()+t,l=(h=h<0?h+7:h,o=6<o?o-7:o,function(e,t){var{year:e,month:s,date:i}=D(e);return new Date(e,s,i-t)}(n,h)),d=s+h+o,c=l.getDate(),{year:u,month:p}=D(l),m=0;for(;m<d;){var v=new Date(u,p,c+m);this._generateCell(v),m++}}_generateCell(e){var{type:t,dp:s,opts:i}=this,t=new A({type:t,dp:s,opts:i,date:e,body:this});return this.cells.push(t),t}_generateDayCells(){this._getDaysCells()}_generateMonthCells(){let e=this.dp.parsedViewDate["year"],t=0;for(;t<12;)this.cells.push(this._generateCell(new Date(e,t))),t++}_generateYearCells(){let e=u(this.dp.viewDate),t=e[0]-1,s=e[1]+1,i=t;for(;i<=s;)this.cells.push(this._generateCell(new Date(i,0))),i++}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCells(){switch(this.type){case p.days:this._generateDayCells();break;case p.months:this._generateMonthCells();break;case p.years:this._generateYearCells()}}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(e=>e.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(p.eventChangeViewDate,this.onChangeViewDate),this.dp.off(p.eventChangeCurrentView,this.onChangeCurrentView)}}function S(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}class I{constructor(e){var{dp:e,opts:t}=e;S(this,"onClickNav",e=>{var e=r(e.target,".air-datepicker-nav--action");e&&(e=e.dataset.action,this.dp[e]())}),S(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),S(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),S(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),S(this,"update",()=>{var{prevHtml:e,nextHtml:t}=this.opts;this.$prev.innerHTML=e,this.$next.innerHTML=t,this._resetNavStatus(),this.render(),this.handleNavStatus()}),S(this,"renderDelay",()=>{setTimeout(this.render)}),S(this,"render",()=>{this.$title.innerHTML=this._getTitle();var e,t=this.$title,s={"-disabled-":this.dp.isFinalView};for(e in s)s[e]?t.classList.add(e):t.classList.remove(e)}),this.dp=e,this.opts=t,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=a(".air-datepicker-nav--title",this.$el),this.$prev=a('[data-action="prev"]',this.$el),this.$next=a('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(p.eventChangeViewDate,this.onChangeViewDate),this.dp.on(p.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(p.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(p.eventChangeTime,this.render))}destroy(){this.dp.off(p.eventChangeViewDate,this.onChangeViewDate),this.dp.off(p.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(p.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(p.eventChangeTime,this.render))}_createElement(){this.$el=o({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:e,opts:t}=this,s=t.navTitles[e.currentView];return"function"==typeof s?s(e):e.formatDate(e.viewDate,s)}handleNavStatus(){var e=this.opts["disableNavWhenOutOfRange"],{minDate:t,maxDate:s}=this.dp;if((t||s)&&e){var{year:i,month:a}=this.dp.parsedViewDate,n=!!t&&D(t),r=!!s&&D(s);switch(this.dp.currentView){case p.days:t&&n.month>=a&&n.year>=i&&this._disableNav("prev"),s&&r.month<=a&&r.year<=i&&this._disableNav("next");break;case p.months:t&&n.year>=i&&this._disableNav("prev"),s&&r.year<=i&&this._disableNav("next");break;case p.years:var h=u(this.dp.viewDate);t&&n.year>=h[0]&&this._disableNav("prev"),s&&r.year<=h[1]&&this._disableNav("next")}}}_disableNav(e){a('[data-action="'+e+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(e){for(var t=arguments.length,s=new Array(1<t?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];e.length?e.forEach(e=>{e.classList.remove(...s)}):e.classList.remove(...s)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){var{prevHtml:e,nextHtml:t}=this.opts;this.$el.innerHTML='<div class="air-datepicker-nav--action" data-action="prev">'.concat(e,"</div>")+'<div class="air-datepicker-nav--title"></div>'+'<div class="air-datepicker-nav--action" data-action="next">'.concat(t,"</div>")}get isNavIsFunction(){let t=this.opts["navTitles"];return Object.keys(t).find(e=>"function"==typeof t[e])}}var T={today:{content:e=>e.locale.today,onClick:e=>e.setViewDate(new Date)},clear:{content:e=>e.locale.clear,onClick:e=>e.clear()}};class R{constructor(e){var{dp:e,opts:t}=e;this.dp=e,this.opts=t,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=o({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let e=this.opts["buttons"];(e=Array.isArray(e)?e:[e]).forEach(e=>{let t=e;"string"==typeof e&&T[e]&&(t=T[e]);e=this.createButton(t);t.onClick&&this.attachEventToButton(e,t.onClick),this.$el.appendChild(e)})}attachEventToButton(e,t){e.addEventListener("click",()=>{t(this.dp)})}createButton(e){let{content:t,className:s,tagName:i="button",attrs:a={}}=e,n="function"==typeof t?t(this.dp):t;return o({tagName:i,innerHtml:"<span tabindex='-1'>".concat(n,"</span>"),className:m("air-datepicker-button",s),attrs:a})}render(){this.generateButtons()}}function F(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}class P{constructor(){var{opts:e,dp:t}=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};F(this,"toggleTimepickerIsActive",e=>{this.dp.timepickerIsActive=e}),F(this,"onChangeSelectedDate",e=>{var{date:e,updateTime:t=!1}=e;e&&(this.setMinMaxTime(e),this.setCurrentTime(!!t&&e),this.addTimeToDate(e))}),F(this,"onChangeLastSelectedDate",e=>{e&&(this.setTime(e),this.render())}),F(this,"onChangeInputRange",e=>{let t=e.target;this[t.getAttribute("name")]=t.value,this.updateText(),this.dp.trigger(p.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),F(this,"onMouseEnterLeave",e=>{let t=e.target.getAttribute("name"),s=this.$minutesText;(s="hours"===t?this.$hoursText:s).classList.toggle("-focus-")}),F(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),F(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=e,this.dp=t;let s=this.dp.locale["timeFormat"];s&&(s.match(v("h"))||s.match(v("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(p.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(p.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let e="input";navigator.userAgent.match(/trident/gi)&&(e="change"),n(this.$ranges,e,this.onChangeInputRange),n(this.$ranges,"mouseenter",this.onMouseEnterLeave),n(this.$ranges,"mouseleave",this.onMouseEnterLeave),n(this.$ranges,"focus",this.onFocus),n(this.$ranges,"mousedown",this.onFocus),n(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=o({className:m("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(p.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(p.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){var{ampm:e,hours:t,displayHours:s,minutes:i,minHours:a,minMinutes:n,maxHours:r,maxMinutes:h,dayPeriod:o,opts:{hoursStep:l,minutesStep:d}}=this;this.$el.innerHTML='<div class="air-datepicker-time--current">'+'   <span class="air-datepicker-time--current-hours">'.concat(c(s),"</span>")+'   <span class="air-datepicker-time--current-colon">:</span>'+'   <span class="air-datepicker-time--current-minutes">'.concat(c(i),"</span>")+"   ".concat(e?"<span class='air-datepicker-time--current-ampm'>".concat(o,"</span>"):"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+'      <input type="range" name="hours" value="'.concat(t,'" min="').concat(a,'" max="').concat(r,'" step="').concat(l,'"/>')+'   </div>   <div class="air-datepicker-time--row">'+'      <input type="range" name="minutes" value="'.concat(i,'" min="').concat(n,'" max="').concat(h,'" step="').concat(d,'"/>')+"   </div></div>"}defineDOM(){var e=e=>a(e,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=e('[name="hours"]'),this.$minutes=e('[name="minutes"]'),this.$hoursText=e(".air-datepicker-time--current-hours"),this.$minutesText=e(".air-datepicker-time--current-minutes"),this.$ampm=e(".air-datepicker-time--current-ampm")}setTime(e){this.setMinMaxTime(e),this.setCurrentTime(e)}addTimeToDate(e){e&&(e.setHours(this.hours),e.setMinutes(this.minutes))}setMinMaxTime(e){var t,s;this.setMinMaxTimeFromOptions(),e&&({minDate:t,maxDate:s}=this.dp,t&&y(e,t)&&this.setMinTimeFromMinDate(t),s&&y(e,s)&&this.setMaxTimeFromMaxDate(s))}setCurrentTime(e){var{hours:e,minutes:t}=e?D(e):this;this.hours=d(e,this.minHours,this.maxHours),this.minutes=d(t,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){var{minHours:e,minMinutes:t,maxHours:s,maxMinutes:i}=this.opts;this.minHours=d(e,0,23),this.minMinutes=d(t,0,59),this.maxHours=d(s,0,23),this.maxMinutes=d(i,0,59)}setMinTimeFromMinDate(e){let t=this.dp["lastSelectedDate"];this.minHours=e.getHours(),t&&t.getHours()>e.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=e.getMinutes()}setMaxTimeFromMaxDate(e){let t=this.dp["lastSelectedDate"];this.maxHours=e.getHours(),t&&t.getHours()<e.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=e.getMinutes()}getDayPeriod(e,t){let s,i=Number(e),a=(e instanceof Date&&(s=D(e),i=Number(s.hours)),"am");if(t||this.ampm){switch(!0){case 12===i:case 11<i:a="pm"}i=i%12==0?12:i%12}return{hours:i,dayPeriod:a}}updateSliders(){h(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,h(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=c(this.displayHours),this.$minutesText.innerHTML=c(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(e){this._hours=e;var{hours:e,dayPeriod:t}=this.getDayPeriod(e);this.displayHours=e,this.dayPeriod=t}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function V(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}class B{constructor(e){var{dp:e,opts:t}=e;V(this,"pressedKeys",new Set),V(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],e=>e.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],e=>e.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],e=>e.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],e=>e.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],e=>e.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],e=>e.year-=10],[["Control","Shift","ArrowUp"],(e,t)=>t.up()]])),V(this,"handleHotKey",e=>{let t=this.hotKeys.get(e),s=D(this.getInitialFocusDate()),{year:i,month:a,date:n}=(t(s,this.dp),s),r=g(new Date(i,a));r<n&&(n=r);e=this.dp.getClampedDate(new Date(i,a,n));this.dp.setFocusDate(e,{viewDateTransition:!0})}),V(this,"isHotKeyPressed",()=>{let s=!1,i=this.pressedKeys.size,a=e=>this.pressedKeys.has(e);for(let[t]of this.hotKeys){if(s)break;Array.isArray(t[0])?t.forEach(e=>{s||i!==e.length||(s=e.every(a)&&t)}):i===t.length&&(s=t.every(a)&&t)}return s}),V(this,"isArrow",e=>37<=e&&e<=40),V(this,"onKeyDown",e=>{let{key:t,which:s}=e,{dp:i,dp:{focusDate:a},opts:n}=this;this.registerKey(t);var r=this.isHotKeyPressed();if(r)e.preventDefault(),this.handleHotKey(r);else if(this.isArrow(s))e.preventDefault(),this.focusNextCell(t);else{if("Enter"===t){if(i.currentView!==n.minView)return void i.down();if(a)return void((r=i._checkIfDateIsSelected(a))?i._handleAlreadySelectedDates(r,a):i.selectDate(a))}"Escape"===t&&this.dp.hide()}}),V(this,"onKeyUp",e=>{this.removeKey(e.key)}),this.dp=e,this.opts=t,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let e=this.dp["$el"];e.addEventListener("keydown",this.onKeyDown),e.addEventListener("keyup",this.onKeyUp)}destroy(){let e=this.dp["$el"];e.removeEventListener("keydown",this.onKeyDown),e.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:e,currentView:t,selectedDates:s,parsedViewDate:{year:i,month:a}}=this.dp,n=e||s[s.length-1];if(!n)switch(t){case p.days:n=new Date(i,a,(new Date).getDate());break;case p.months:n=new Date(i,a,1);break;case p.years:n=new Date(i,0,1)}return n}focusNextCell(e){let t=this.getInitialFocusDate(),s=this.dp["currentView"],{days:i,months:a,years:n}=p,r=D(t),h=r.year,o=r.month,l=r.date;switch(e){case"ArrowLeft":s===i&&--l,s===a&&--o,s===n&&--h;break;case"ArrowUp":s===i&&(l-=7),s===a&&(o-=3),s===n&&(h-=4);break;case"ArrowRight":s===i&&(l+=1),s===a&&(o+=1),s===n&&(h+=1);break;case"ArrowDown":s===i&&(l+=7),s===a&&(o+=3),s===n&&(h+=4)}e=this.dp.getClampedDate(new Date(h,o,l));this.dp.setFocusDate(e,{viewDateTransition:!0})}registerKey(e){this.pressedKeys.add(e)}removeKey(e){this.pressedKeys.delete(e)}}var t,K={on(e,t){this.__events||(this.__events={}),this.__events[e]?this.__events[e].push(t):this.__events[e]=[t]},off(e,t){this.__events&&this.__events[e]&&(this.__events[e]=this.__events[e].filter(e=>e!==t))},removeAllEvents(){this.__events={}},trigger(e){for(var t=arguments.length,s=new Array(1<t?t-1:0),i=1;i<t;i++)s[i-1]=arguments[i];this.__events&&this.__events[e]&&this.__events[e].forEach(e=>{e(...s)})}};function x(e,t,s){t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s}let H="",L="",O="",j=!1;class E{constructor(e,t){var v=this;x(this,"viewIndexes",[p.days,p.months,p.years]),x(this,"next",()=>{var{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case p.days:this.setViewDate(new Date(e,t+1,1));break;case p.months:this.setViewDate(new Date(e+1,t,1));break;case p.years:this.setViewDate(new Date(e+10,0,1))}}),x(this,"prev",()=>{var{year:e,month:t}=this.parsedViewDate;switch(this.currentView){case p.days:this.setViewDate(new Date(e,t-1,1));break;case p.months:this.setViewDate(new Date(e-1,t,1));break;case p.years:this.setViewDate(new Date(e-10,0,1))}}),x(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),x(this,"setPosition",function(m){if("function"==typeof(m=m||v.opts.position))v.customHide=m({$datepicker:v.$datepicker,$target:v.$el,$pointer:v.$pointer,isViewChange:1<arguments.length&&void 0!==arguments[1]&&arguments[1],done:v._finishHide});else{let e,t,s=v.opts["isMobile"],i=v.$el.getBoundingClientRect(),a=v.$el.getBoundingClientRect(),n=v.$datepicker.offsetParent,r=v.$el.offsetParent,h=v.$datepicker.getBoundingClientRect(),o=m.split(" "),l=window.scrollY,d=window.scrollX,c=v.opts.offset,u=o[0],p=o[1];if(s)v.$datepicker.style.cssText="left: 50%; top: 50%";else{switch(n===r&&n!==document.body&&(a={top:v.$el.offsetTop,left:v.$el.offsetLeft,width:i.width,height:v.$el.offsetHeight},l=0,d=0),n!==r&&n!==document.body&&(m=n.getBoundingClientRect(),a={top:i.top-m.top,left:i.left-m.left,width:i.width,height:i.height},l=0,d=0),u){case"top":e=a.top-h.height-c;break;case"right":t=a.left+a.width+c;break;case"bottom":e=a.top+a.height+c;break;case"left":t=a.left-h.width-c}switch(p){case"top":e=a.top;break;case"right":t=a.left+a.width-h.width;break;case"bottom":e=a.top+a.height-h.height;break;case"left":t=a.left;break;case"center":/left|right/.test(u)?e=a.top+a.height/2-h.height/2:t=a.left+a.width/2-h.width/2}v.$datepicker.style.cssText="left: ".concat(t+d,"px; top: ").concat(e+l,"px")}}}),x(this,"_setInputValue",()=>{let{opts:e,$altField:t,locale:{dateFormat:s}}=this,{altFieldDateFormat:i,altField:a}=e;a&&t&&(t.value=this._getInputValue(i)),this.$el.value=this._getInputValue(s)}),x(this,"_getInputValue",t=>{let{selectedDates:e,opts:s}=this,{multipleDates:i,multipleDatesSeparator:a}=s;if(!e.length)return"";let n="function"==typeof t,r=n?t(i?e:e[0]):e.map(e=>this.formatDate(e,t));return r=n?r:r.join(a)}),x(this,"_checkIfDateIsSelected",function(s){let i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p.days,a=!1;return v.selectedDates.some(e=>{var t=y(s,e,i);return a=t&&e,t}),a}),x(this,"_scheduleCallAfterTransition",e=>{this._cancelScheduledCall(),e&&e(!1),this._onTransitionEnd=()=>{e&&e(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),x(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),x(this,"setViewDate",t=>{if((t=k(t))instanceof Date&&!y(t,this.viewDate)){var s,i,a=this.viewDate;this.viewDate=t;let e=this.opts["onChangeViewDate"];e&&({month:s,year:i}=this.parsedViewDate,e({month:s,year:i,decade:this.curDecade})),this.trigger(p.eventChangeViewDate,t,a)}}),x(this,"setFocusDate",function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(!e||(e=k(e))instanceof Date)&&(v.focusDate=e,v.opts.range&&e&&v._handleRangeOnFocus(),v.trigger(p.eventChangeFocusDate,e,t))}),x(this,"setCurrentView",e=>{var t;this.viewIndexes.includes(e)&&(this.currentView=e,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(p.eventChangeCurrentView,e),this.views[e]||(t=this.views[e]=new $({dp:this,opts:this.opts,type:e}),this.shouldUpdateDOM&&this.$content.appendChild(t.$el)),this.opts.onChangeView&&this.opts.onChangeView(e))}),x(this,"_updateLastSelectedDate",e=>{this.lastSelectedDate=e,this.trigger(p.eventChangeLastSelectedDate,e)}),x(this,"destroy",()=>{let{showEvent:e,isMobile:t}=this.opts,s=this.$datepicker.parentNode;s&&s.removeChild(this.$datepicker),this.$el.removeEventListener(e,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),t&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),x(this,"update",e=>{var t=b({},this.opts),{timepicker:s,buttons:i,range:a,selectedDates:n,isMobile:r}=(b(this.opts,e),this.opts),h=this.visible||this.treatAsInline;this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this._handleLocale(),!t.selectedDates&&n&&this.selectDate(n),e.view&&this.setCurrentView(e.view),this._setInputValue(),t.range&&!a?(this.rangeDateTo=!1,this.rangeDateFrom=!1):!t.range&&a&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0],this.rangeDateTo=this.selectedDates[1]),t.timepicker&&!s?(h&&this.timepicker.destroy(),this.timepicker=!1,this.$timepicker.parentNode.removeChild(this.$timepicker)):!t.timepicker&&s&&this._addTimepicker(),!t.buttons&&i?this._addButtons():t.buttons&&!i?(this.buttons.destroy(),this.$buttons.parentNode.removeChild(this.$buttons)):h&&t.buttons&&i&&this.buttons.clearHtml().render(),!t.isMobile&&r?(this.treatAsInline||O||this._createMobileOverlay(),this._addMobileAttributes(),this.visible&&this._showMobileOverlay()):t.isMobile&&!r&&(this._removeMobileAttributes(),this.visible&&(O.classList.remove("-active-"),"function"!=typeof this.opts.position&&this.setPosition())),h&&(this.nav.update(),this.views[this.currentView].render(),this.currentView===p.days&&this.views[this.currentView].renderDayNames())}),x(this,"isOtherMonth",e=>{e=D(e).month;return e!==this.parsedViewDate.month}),x(this,"isOtherYear",e=>{e=D(e).year;return e!==this.parsedViewDate.year}),x(this,"isOtherDecade",e=>{var e=D(e)["year"],[t,s]=u(this.viewDate);return e<t||s<e}),x(this,"_onChangeSelectedDate",e=>{let t=e["silent"];setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!t&&this._triggerOnSelect()})}),x(this,"_onChangeFocusedDate",function(t){var s=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})["viewDateTransition"];if(t){let e=!1;(e=s?v.isOtherMonth(t)||v.isOtherYear(t)||v.isOtherDecade(t):e)&&v.setViewDate(t)}}),x(this,"_onChangeTime",e=>{let{hours:t,minutes:s}=e,i=new Date,{lastSelectedDate:a,opts:{onSelect:n}}=this,r=a;a||(r=i);e=this.getCell(r,this.currentViewSingular),e=e&&e.adpCell;e&&e.isDisabled||(r.setHours(t),r.setMinutes(s),a?(this._setInputValue(),n&&this._triggerOnSelect()):this.selectDate(r))}),x(this,"_onFocus",e=>{this.visible||this.show()}),x(this,"_onBlur",e=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),x(this,"_onMouseDown",e=>{this.inFocus=!0}),x(this,"_onMouseUp",e=>{this.inFocus=!1,this.$el.focus()}),x(this,"_onResize",()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()}),x(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),x(this,"isWeekend",e=>this.opts.weekends.includes(e)),x(this,"getClampedDate",e=>{let{minDate:t,maxDate:s}=this,i=e;return s&&f(e,s)?i=s:t&&w(e,t)&&(i=t),i}),this.$el=a(e),this.$el&&(this.$datepicker=o({className:"air-datepicker"}),this.opts=b({},s,t),this.$customContainer=!!this.opts.container&&a(this.opts.container),this.$altField=a(this.opts.altField||!1),H=H||a("body"),{view:e,startDate:t}=this.opts,t||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=k(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=e,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init())}init(){var e,{opts:t,treatAsInline:s,opts:{inline:i,isMobile:a,selectedDates:n,keyboardNav:r,onlyTimepicker:h}}=this;j||i||!this.elIsInput||(j=!0,L=o({className:e=E.defaultContainerId,id:e}),H.appendChild(L)),!a||O||s||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),r&&!h&&(this.keyboardNav=new B({dp:this,opts:t}))),n&&this.selectDate(n,{silent:!0}),this.opts.visible&&!s&&this.show(),a&&!s&&this.$el.setAttribute("readonly",!0),s&&this._createComponents()}_createMobileOverlay(){O=o({className:"air-datepicker-overlay"}),L.appendChild(O)}_createComponents(){let{opts:e,treatAsInline:t,opts:{inline:s,buttons:i,timepicker:a,position:n,classes:r,onlyTimepicker:h,isMobile:o}}=this;this._buildBaseHtml(),this.elIsInput&&!s&&this._setPositionClasses(n),!s&&this.elIsInput||this.$datepicker.classList.add("-inline-"),r&&this.$datepicker.classList.add(...r.split(" ")),h&&this.$datepicker.classList.add("-only-timepicker-"),o&&!t&&this._addMobileAttributes(),this.views[this.currentView]=new $({dp:this,type:this.currentView,opts:e}),this.nav=new I({dp:this,opts:e}),a&&this._addTimepicker(),i&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(var e in this.views)this.views[e].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){O.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){O.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){var{minDate:e,maxDate:t}=this.opts;this.minDate=!!e&&k(e),this.maxDate=!!t&&k(t)}_addTimepicker(){this.$timepicker=o({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new P({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=o({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new R({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(p.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(p.eventChangeFocusDate,this._onChangeFocusedDate),this.on(p.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){var e,t=this.opts["inline"];this.elIsInput?t?(t=this.$datepicker,(e=this.$el).parentNode.insertBefore(t,e.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=a(".air-datepicker--content",this.$datepicker),this.$pointer=a(".air-datepicker--pointer",this.$datepicker),this.$nav=a(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){var{locale:e,dateFormat:t,firstDay:s,timepicker:i,onlyTimepicker:a,timeFormat:n,dateTimeSeparator:r}=this.opts;this.locale=JSON.parse(JSON.stringify(e)),t&&(this.locale.dateFormat=t),void 0!==n&&""!==n&&(this.locale.timeFormat=n);let h=this.locale["timeFormat"];""!==s&&(this.locale.firstDay=s),i&&"function"!=typeof t&&(e=h?r:"",this.locale.dateFormat=[this.locale.dateFormat,h||""].join(e)),a&&"function"!=typeof t&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(i){if("function"==typeof i)this.$datepicker.classList.add("-custom-position-");else{let e=(i=i.split(" "))[0],t=i[1],s="air-datepicker -".concat(e,"-").concat(t,"- -from-").concat(e,"-");this.$datepicker.classList.add(...s.split(" "))}}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){var{viewDate:e,minDate:t,maxDate:s}=this;s&&f(e,s)&&this.setViewDate(s),t&&w(e,t)&&this.setViewDate(t)}formatDate(){let r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.viewDate,h=1<arguments.length?arguments[1]:void 0;if((r=k(r))instanceof Date){let e=h,t=this.locale,s=D(r),i=u(r),a=E.replacer,n="am";this.opts.timepicker&&this.timepicker&&(n=this.timepicker.getDayPeriod(r).dayPeriod);var o,l,d={T:r.getTime(),m:s.minutes,mm:s.fullMinutes,h:s.hours12,hh:s.fullHours12,H:s.hours,HH:s.fullHours,aa:n,AA:n.toUpperCase(),E:t.daysShort[s.day],EEEE:t.days[s.day],d:s.date,dd:s.fullDate,M:s.month+1,MM:s.fullMonth,MMM:t.monthsShort[s.month],MMMM:t.months[s.month],yy:s.year.toString().slice(-2),yyyy:s.year,yyyy1:i[0],yyyy2:i[1]};for([o,l]of Object.entries(d))e=a(e,v(o),l);return e}}down(e){this._handleUpDownActions(e,"down")}up(e){this._handleUpDownActions(e,"up")}selectDate(e){let t,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{currentView:i,parsedViewDate:a,selectedDates:n}=this,r=s["updateTime"],{moveToOtherMonthsOnSelect:h,moveToOtherYearsOnSelect:o,multipleDates:l,range:d,autoClose:c}=this.opts,u=n.length;if(Array.isArray(e))return e.forEach(e=>{this.selectDate(e,s)}),new Promise(e=>{setTimeout(e)});if((e=k(e))instanceof Date){if(i===p.days&&e.getMonth()!==a.month&&h&&(t=new Date(e.getFullYear(),e.getMonth(),1)),(t=i===p.years&&e.getFullYear()!==a.year&&o?new Date(e.getFullYear(),0,1):t)&&this.setViewDate(t),l&&!d){if(u===l)return;this._checkIfDateIsSelected(e)||n.push(e)}else if(d)switch(u){case 1:n.push(e),this.rangeDateTo||(this.rangeDateTo=e),f(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=e),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[e],this.rangeDateFrom=e,this.rangeDateTo="";break;default:this.selectedDates=[e],this.rangeDateFrom=e}else this.selectedDates=[e];return this.trigger(p.eventChangeSelectedDate,{action:p.actionSelectDate,silent:null==s?void 0:s.silent,date:e,updateTime:r}),this._updateLastSelectedDate(e),c&&!this.timepickerIsActive&&this.visible&&(!l&&!d||d&&1===u)&&this.hide(),new Promise(e=>{setTimeout(e)})}}unselectDate(s){let i=this.selectedDates,a=this;if((s=k(s))instanceof Date)return i.some((e,t)=>{if(y(e,s))return i.splice(t,1),a.selectedDates.length?a._updateLastSelectedDate(a.selectedDates[a.selectedDates.length-1]):(a.rangeDateFrom="",a.rangeDateTo="",a._updateLastSelectedDate(!1)),this.trigger(p.eventChangeSelectedDate,{action:p.actionUnselectDate,date:s}),!0})}replaceDate(t,e){var s=this.selectedDates.find(e=>y(e,t,this.currentView)),s=this.selectedDates.indexOf(s);s<0||y(this.selectedDates[s],e,this.currentView)||(this.selectedDates[s]=e,this.trigger(p.eventChangeSelectedDate,{action:p.actionSelectDate,date:e,updateTime:!0}),this._updateLastSelectedDate(e))}clear(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.trigger(p.eventChangeSelectedDate,{action:p.actionUnselectDate,silent:e.silent}),new Promise(e=>{setTimeout(e)})}show(){var{onShow:e,isMobile:t}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,e&&this._scheduleCallAfterTransition(e),t&&this._showMobileOverlay()}hide(){let{onHide:t,isMobile:e}=this.opts,s=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(e=>{!this.customHide&&(e&&s||!e&&!s)&&this._finishHide(),t&&t(e)}),e&&O.classList.remove("-active-")}_triggerOnSelect(){let e=[],t=[],{selectedDates:s,locale:i,opts:{onSelect:a,multipleDates:n,range:r}}=this,h=n||r,o="function"==typeof i.dateFormat;s.length&&(e=s.map(l),t=o?n?i.dateFormat(e):e.map(e=>i.dateFormat(e)):e.map(e=>this.formatDate(e,i.dateFormat))),a({date:h?e:e[0],formattedDate:h?t:t[0],datepicker:this})}_handleAlreadySelectedDates(e,t){var{range:s,toggleSelected:i}=this.opts;s?i?this.unselectDate(t):2!==this.selectedDates.length&&this.selectDate(t):i&&this.unselectDate(t),i||this._updateLastSelectedDate(e)}_handleUpDownActions(t,s){if((t=k(t||this.focusDate||this.viewDate))instanceof Date){let e="up"===s?this.viewIndex+1:this.viewIndex-1;(e=2<e?2:e)<0&&(e=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[e])}}_handleRangeOnFocus(){1===this.selectedDates.length&&(f(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(e){var t,s,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:p.day;if((e=k(e))instanceof Date)return{year:e,month:t,date:s}=D(e),e='[data-year="'.concat(e,'"]'),t='[data-month="'.concat(t,'"]'),s='[data-date="'.concat(s,'"]'),s={[p.day]:"".concat(e).concat(t).concat(s),[p.month]:"".concat(e).concat(t),[p.year]:"".concat(e)},this.views[this.currentView].$el.querySelector(s[i])}_showMobileOverlay(){O.classList.add("-active-")}_hasTransition(){return 0<window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((e,t)=>parseFloat(t)+e,0)}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return D(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return u(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===p.years}get hasSelectedDates(){return 0<this.selectedDates.length}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===p.days}get $container(){return this.$customContainer||L}static replacer(e,t,a){return e.replace(t,function(e,t,s,i){return t+a+i})}}return x(E,"defaults",s),x(E,"version","3.3.0"),x(E,"defaultContainerId","air-datepicker-global-container"),t=E.prototype,Object.assign(t,K),e.default});